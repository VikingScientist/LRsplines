@PACKAGE_INIT@

if(NOT TARGET GoTools::GoToolsCore)
  find_package(SISL QUIET)
  find_package(GoToolsCore QUIET)
  find_package(GoTrivariate QUIET)
  if(TARGET GoToolsCore AND TARGET GoTrivariate)
    add_library(GoTools::GoToolsCore IMPORTED INTERFACE)
    string(REPLACE "." ";" GoVersion ${GoToolsCore_VERSION})
    list(GET GoVersion 0 GoToolsCore_VERSION_MAJOR)
    target_compile_definitions(GoTools::GoToolsCore
      INTERFACE
        GoTools_VERSION_MAJOR=${GoToolsCore_VERSION_MAJOR}
        GOTOOLS_HAS_BASISDERIVS_SF3=1
    )
    target_link_libraries(GoTools::GoToolsCore INTERFACE GoToolsCore)
    add_library(GoTools::GoTrivariate IMPORTED INTERFACE)
    target_link_libraries(
      GoTools::GoTrivariate
      INTERFACE
        GoTrivariate
        GoTools::GoToolsCore
    )
  else()
    find_package(GoTools)
    find_package(GoTrivariate)
    if(GoTools_FOUND AND GoTrivariate_FOUND)
      find_package(GoTools)
      add_library(GoTools::GoToolsCore INTERFACE IMPORTED)
      set(GoTools_LIBRARY_DIRS ${GoTools_LIBRARIES})
      list(FILTER GoTools_LIBRARY_DIRS INCLUDE REGEX -L.*)
      list(TRANSFORM GoTools_LIBRARY_DIRS REPLACE "-L" "")
      list(FILTER GoTools_LIBRARIES EXCLUDE REGEX -L.*)
      target_link_libraries(GoTools::GoToolsCore INTERFACE ${GoTools_LIBRARIES})
      target_include_directories(GoTools::GoToolsCore INTERFACE ${GoTools_INCLUDE_DIRS})
      target_compile_definitions(GoTools::GoToolsCore INTERFACE ${GoTools_CXX_FLAGS} -DGoTools_VERSION_MAJOR=4)
      target_link_directories(GoTools::GoToolsCore INTERFACE ${GoTools_LIBRARY_DIRS})
      include(CheckTypeSize)
      set(CMAKE_EXTRA_INCLUDE_FILES "GoTools/geometry/SplineSurface.h")
      set(CMAKE_REQUIRED_FLAGS -std=c++11)
      check_type_size(Go::BasisDerivsSf3 HAS_BD3 LANGUAGE CXX)
      if(HAS_BD3)
        target_compile_definitions(GoTools::GoToolsCore INTERFACE GOTOOLS_HAS_BASISDERIVS_SF3=1)
      endif()

      add_library(GoTools::GoTrivariate INTERFACE IMPORTED)
      set(GoTrivariate_LIBRARY_DIRS ${GoTrivariate_LIBRARIES})
      list(FILTER GoTrivariate_LIBRARY_DIRS INCLUDE REGEX -L.*)
      list(TRANSFORM GoTrivariate_LIBRARY_DIRS REPLACE "-L" "")
      list(FILTER GoTrivariate_LIBRARIES EXCLUDE REGEX -L.*)
      target_include_directories(GoTools::GoTrivariate INTERFACE ${GoTrivariate_INCLUDE_DIRS})
      target_link_libraries(GoTools::GoTrivariate INTERFACE ${GoTrivariate_LIBRARIES} GoTools::GoToolsCore)
      target_link_directories(GoTools::GoTrivariate INTERFACE ${GoTrivariate_LIBRARY_DIRS})
    endif()
  endif()
endif()

include("${CMAKE_CURRENT_LIST_DIR}/LRSplineTargets.cmake")
